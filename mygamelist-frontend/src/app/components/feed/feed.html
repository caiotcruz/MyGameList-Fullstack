<div class="feed-container">
  <h3>Ãšltimas Atividades</h3>
  
  <div class="activity-list">
    <div *ngFor="let item of activities" class="activity-card">
      
      <img [src]="item.game.coverUrl" 
           alt="Capa" 
           class="game-thumb"
           [routerLink]="['/game', item.game.rawgId]"
           style="cursor: pointer;">
      
      <div class="activity-main-col">
          
          <div class="activity-content">
            <p class="activity-text">
              <strong [routerLink]="['/profile', item.user.id]" style="cursor: pointer;">
                  {{ item.user.name }}
              </strong> 
              
              {{ getActionText(item.type) }}
              <span class="highlight">{{ formatDetail(item.type, item.detail) }}</span>
              no jogo
              
              <strong [routerLink]="['/game', item.game.rawgId]" style="cursor: pointer;">
                  {{ item.game.title }}
              </strong>
            </p>
            <span class="activity-date">{{ item.timestamp | date:'dd/MM HH:mm' }}</span>
          </div>

          <div class="action-bar">
            <button class="btn-action" [class.liked]="isLikedByMe(item)" (click)="toggleLike(item)">
                <span>{{ isLikedByMe(item) ? 'â¤ï¸' : 'ğŸ¤' }}</span>
                <span class="count" *ngIf="item.likes?.length">{{ item.likes.length }}</span>
            </button>

            <button class="btn-action" (click)="toggleComments(item)">
                <span>ğŸ’¬</span>
                <span class="count" *ngIf="item.comments?.length">{{ item.comments.length }}</span>
            </button>
          </div>

          <div class="comments-section" *ngIf="item.showComments">
              
              <div class="comments-list" *ngIf="item.comments?.length">
                  <div class="comment-row" *ngFor="let c of item.comments">
                      <strong>{{ c.user.name }}:</strong> {{ c.text }}
                  </div>
              </div>

              <div class="comment-input-wrapper">
                  <input #ipt type="text" placeholder="Escreva algo..." (keyup.enter)="enviarComentario(item, ipt)">
                  <button (click)="enviarComentario(item, ipt)">Enviar</button>
              </div>
          </div>

      </div> 
    </div>
    
    <p *ngIf="activities.length === 0" class="empty-state">
      Nenhuma atividade recente. Jogue alguma coisa! ğŸ®
    </p>
  </div>
</div>